<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¯å¢ƒå˜é‡æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
        code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ H5 Video Embed ç¯å¢ƒå˜é‡æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>ğŸ“‹ ç¯å¢ƒæ£€æŸ¥</h2>
        <div id="env-check"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª åŠŸèƒ½æµ‹è¯•</h2>
        <div id="function-test"></div>
    </div>

    <script type="module">
        // æµ‹è¯•ç¯å¢ƒå˜é‡
        function testEnvironment() {
            const envDiv = document.getElementById('env-check');
            let html = '';

            // æ£€æŸ¥æ˜¯å¦åœ¨ Vite ç¯å¢ƒä¸­
            if (typeof import.meta !== 'undefined' && import.meta.env) {
                html += '<p class="success">âœ… åœ¨ Vite ç¯å¢ƒä¸­è¿è¡Œ</p>';
                html += '<p>ğŸ”§ ç¯å¢ƒæ¨¡å¼: <code>' + import.meta.env.MODE + '</code></p>';
                html += '<p>ğŸ—ï¸ å¼€å‘æ¨¡å¼: <code>' + import.meta.env.DEV + '</code></p>';
                
                // æ£€æŸ¥è‡ªå®šä¹‰ç¯å¢ƒå˜é‡
                const youtubeKey = import.meta.env.VITE_YOUTUBE_API_KEY;
                const serverUrl = import.meta.env.VITE_SERVER_URL;
                
                html += '<h3>ğŸ“ è‡ªå®šä¹‰ç¯å¢ƒå˜é‡:</h3>';
                html += '<p>YouTube API Key: ' + 
                       (youtubeKey ? '<span class="success">å·²é…ç½®</span>' : '<span class="warning">æœªé…ç½®</span>') + '</p>';
                html += '<p>æœåŠ¡å™¨åœ°å€: <code>' + (serverUrl || 'http://localhost:3001') + '</code></p>';
                
            } else if (typeof process !== 'undefined' && process.env) {
                html += '<p class="warning">âš ï¸ åœ¨ Node.js ç¯å¢ƒä¸­è¿è¡Œ</p>';
                html += '<p>è¿™ä¸ªæµ‹è¯•åº”è¯¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ</p>';
            } else {
                html += '<p class="error">âŒ æ— æ³•æ£€æµ‹åˆ°ç¯å¢ƒå˜é‡ç³»ç»Ÿ</p>';
            }

            envDiv.innerHTML = html;
        }

        // æµ‹è¯•åŸºç¡€åŠŸèƒ½
        function testFunctions() {
            const testDiv = document.getElementById('function-test');
            let html = '';

            try {
                // æµ‹è¯• fetch API
                if (typeof fetch !== 'undefined') {
                    html += '<p class="success">âœ… Fetch API å¯ç”¨</p>';
                } else {
                    html += '<p class="error">âŒ Fetch API ä¸å¯ç”¨</p>';
                }

                // æµ‹è¯• URL æ„é€ 
                try {
                    new URL('https://example.com');
                    html += '<p class="success">âœ… URL æ„é€ å™¨å¯ç”¨</p>';
                } catch (e) {
                    html += '<p class="error">âŒ URL æ„é€ å™¨ä¸å¯ç”¨</p>';
                }

                // æµ‹è¯• JSON è§£æ
                try {
                    JSON.parse('{"test": true}');
                    html += '<p class="success">âœ… JSON è§£æå¯ç”¨</p>';
                } catch (e) {
                    html += '<p class="error">âŒ JSON è§£æä¸å¯ç”¨</p>';
                }

                html += '<h3>ğŸ¯ å»ºè®®:</h3>';
                html += '<p>å¦‚æœæ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡ï¼Œæ‚¨å¯ä»¥æ­£å¸¸ä½¿ç”¨ H5 Video Embed ç»„ä»¶ï¼</p>';
                html += '<p>å¦‚æœæœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨å…¼å®¹æ€§å’Œç½‘ç»œè¿æ¥ã€‚</p>';

            } catch (error) {
                html += '<p class="error">âŒ æµ‹è¯•è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯: ' + error.message + '</p>';
            }

            testDiv.innerHTML = html;
        }

        // è¿è¡Œæµ‹è¯•
        testEnvironment();
        testFunctions();

        // æ·»åŠ åˆ·æ–°æŒ‰é’®
        document.body.innerHTML += `
            <div class="test-section">
                <button onclick="location.reload()" style="
                    background: linear-gradient(45deg, #667eea, #764ba2);
                    color: white;
                    border: none;
                    padding: 12px 24px;
                    border-radius: 8px;
                    cursor: pointer;
                    font-size: 16px;
                    font-weight: 500;
                ">ğŸ”„ é‡æ–°æµ‹è¯•</button>
            </div>
        `;
    </script>
</body>
</html>
