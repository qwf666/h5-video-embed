# ğŸš€ å¿«é€Ÿå¼€å§‹

æ¬¢è¿ä½¿ç”¨ H5 Video Embed Monorepoï¼ä¸“ä¸ºå›½å†…ä¸»æµè§†é¢‘å¹³å°ä¼˜åŒ–çš„è§†é¢‘åµŒå…¥è§£å†³æ–¹æ¡ˆï¼Œé‡ç‚¹æ”¯æŒæŠ–éŸ³ã€Bç«™ã€è…¾è®¯è§†é¢‘ã€è¥¿ç“œè§†é¢‘ã€å¿«æ‰‹ç­‰å¹³å°ã€‚

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- pnpm >= 8.0.0

**çœŸå®ä¸šåŠ¡é€»è¾‘ï¼Œæ— æ¨¡æ‹Ÿæ•°æ®ï¼** æœ¬é¡¹ç›®ä½¿ç”¨çœŸå®çš„è§†é¢‘å¹³å° API æä¾›å®Œæ•´åŠŸèƒ½ã€‚

## ğŸ”§ å®‰è£…ä¾èµ–

### å®‰è£…æ‰€æœ‰ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰åŒ…çš„ä¾èµ–
pnpm install
```

å°±è¿™ä¹ˆç®€å•ï¼ç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰ä¾èµ–ã€‚

### ğŸ”‘ å¯é€‰ï¼šé…ç½® API å¯†é’¥ï¼ˆæ¨èï¼‰

ä¸ºäº†è·å¾—æœ€ä½³ä½“éªŒï¼Œå»ºè®®é…ç½® YouTube Data API v3ï¼š

```bash
# åœ¨ packages/server/ ä¸‹åˆ›å»º .env æ–‡ä»¶
echo "YOUTUBE_API_KEY=your_api_key_here" > packages/server/.env
```

è¯¦ç»†é…ç½®æ­¥éª¤ï¼š[packages/server/API_SETUP.md](packages/server/API_SETUP.md)

## ğŸ¯ å¯åŠ¨é¡¹ç›®

### ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

#### æ¨èæ–¹å¼

```bash
# ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm dev

# æˆ–ä½¿ç”¨ npm
npm run dev:npm
```

è¿™äº›å‘½ä»¤ä¼šè‡ªåŠ¨ï¼š
1. å¯åŠ¨åç«¯æœåŠ¡ï¼ˆç«¯å£ 3001ï¼‰
2. å¯åŠ¨æ¼”ç¤ºåº”ç”¨ï¼ˆç«¯å£ 3000ï¼‰
3. è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨

ğŸ’¡ **æç¤º**ï¼šé‡‡ç”¨å‰ç«¯ä¼˜å…ˆæ¶æ„ï¼Œä¸»è¦é€»è¾‘åœ¨å‰ç«¯å®ç°ï¼Œå“åº”æ›´å¿«ï¼

### æ‰‹åŠ¨å¯åŠ¨

å¦‚æœéœ€è¦åˆ†åˆ«å¯åŠ¨å„ä¸ªæœåŠ¡ï¼š

```bash
# å¯åŠ¨åç«¯æœåŠ¡
cd packages/server
pnpm dev

# æ–°å¼€ç»ˆç«¯ï¼Œå¯åŠ¨æ¼”ç¤ºåº”ç”¨
cd packages/demo-app  
pnpm dev
```

## ğŸŒ è®¿é—®åœ°å€

- **æ¼”ç¤ºåº”ç”¨**: http://localhost:3000
- **åç«¯ API**: http://localhost:3001
- **API å¥åº·æ£€æŸ¥**: http://localhost:3001/health

## ğŸ® ä½¿ç”¨æ¼”ç¤º

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3000
2. é€‰æ‹©é¢„è®¾çš„æ¼”ç¤ºè§†é¢‘æˆ–è¾“å…¥è‡ªå®šä¹‰è§†é¢‘é“¾æ¥
3. è°ƒæ•´æ’­æ”¾å™¨è®¾ç½®ï¼ˆå°ºå¯¸ã€è‡ªåŠ¨æ’­æ”¾ç­‰ï¼‰
4. æŸ¥çœ‹æ“ä½œæ—¥å¿—äº†è§£ç»„ä»¶è¡Œä¸º

## ğŸ“¦ åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨

### 1. å®‰è£…ç»„ä»¶åº“

```bash
npm install h5-video-embed
# æˆ–
yarn add h5-video-embed
# æˆ–
pnpm add h5-video-embed
```

### 2. ä½¿ç”¨ç»„ä»¶

```jsx
import React from 'react';
import { VideoEmbed } from 'h5-video-embed';

function App() {
  return (
    <VideoEmbed 
      url="https://www.youtube.com/watch?v=dQw4w9WgXcQ"
      width="800px"
      height="450px"
      onLoad={(data) => console.log('è§†é¢‘åŠ è½½æˆåŠŸ', data)}
      onError={(error) => console.error('è§†é¢‘åŠ è½½å¤±è´¥', error)}
    />
  );
}
```

### 3. éƒ¨ç½²åç«¯æœåŠ¡

åç«¯æœåŠ¡éœ€è¦å•ç‹¬éƒ¨ç½²ï¼Œå‚è€ƒ `packages/server/README.md` ä¸­çš„éƒ¨ç½²æŒ‡å—ã€‚

## ğŸ› ï¸ å¼€å‘å‘½ä»¤

```bash
# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# è¿è¡Œæµ‹è¯•
pnpm test

# ä»£ç æ£€æŸ¥
pnpm lint

# æ¸…ç†æ‰€æœ‰æ„å»ºäº§ç‰©
pnpm clean
```

## ğŸ› æ•…éšœæ’é™¤

### yt-dlp æœªå®‰è£…

```bash
# æ£€æŸ¥å®‰è£…
yt-dlp --version

# å¦‚æœæŠ¥é”™ï¼Œé‡æ–°å®‰è£…
pip install --upgrade yt-dlp
```

### ç«¯å£è¢«å ç”¨

å¦‚æœç«¯å£ 3000 æˆ– 3001 è¢«å ç”¨ï¼Œå¯ä»¥ï¼š

1. ä¿®æ”¹ `packages/demo-app/vite.config.js` ä¸­çš„ç«¯å£
2. ä¿®æ”¹ `packages/server/server.js` ä¸­çš„ç«¯å£
3. æ€æ‰å ç”¨ç«¯å£çš„è¿›ç¨‹

### è§†é¢‘æ— æ³•æ’­æ”¾

1. ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥è§†é¢‘é“¾æ¥æ˜¯å¦æœ‰æ•ˆ
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
4. ç¡®è®¤ yt-dlp æ”¯æŒè¯¥è§†é¢‘å¹³å°

## ğŸ“š æ›´å¤šæ–‡æ¡£

- [ç»„ä»¶åº“æ–‡æ¡£](packages/h5-video-embed/README.md)
- [åç«¯æœåŠ¡æ–‡æ¡£](packages/server/README.md)
- [API æ–‡æ¡£](packages/server/README.md#api-æ–‡æ¡£)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
